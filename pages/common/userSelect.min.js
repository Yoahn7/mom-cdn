require([cdnDomain+"/js/zlib/app.js"],function(a){function e(){var a={defaultVals:$("#parentId").val()};Bus.openOrgSelect("选择公司",{type:"1"},a,function(a,e,t){return $("#companyId").val(a.id),$("#companyName").val(a.name),!0},function(){$("#companyId").val(""),$("#companyName").val("")})}function t(){var a={defaultVals:$("#parentId").val(),noRoot:!0},e={companyId:$("#companyId").val()};Bus.openOrgSelect("选择公司",e,a,function(a,e,t){var n=a.nodes;if(n&&n.length)for(var o=0;o<n.length;o++)if(0==n[o].type||1==n[o].type)return Mom.layMsg("只能选择部门"),!1;return $("#officeId").val(a.id),$("#officeName").val(a.name),!0},function(){$("#officeId").val(""),$("#officeName").val("")})}var n=Mom.getUrlParam("multiple")||"false";n=1==n||"true"==n,require(["Page"],function(){function a(a){if($("#treeTable").dataTable({data:a,aoColumns:[{data:null,defaultContent:"",sClass:"autoWidth center",render:function(a,e,t,o){var l=n?"checkbox":"radio";return"<input type='"+l+"' class='i-checks' name='id' value='"+t.id+"' data-name='"+a.name+"' data-row='"+JSON.stringify(t)+"'>"}},{data:"loginName",width:"auto",sClass:"center loginName"},{data:"name",width:"auto",sClass:"center name"},{data:"phone",width:"auto",sClass:"center"},{data:"mobile",width:"auto",sClass:"center"}]}),renderIChecks(),defaultVals){var e=[],t="id";"[object Array]"===Object.prototype.toString.call(defaultVals)?e=defaultVals:"object"==typeof defaultVals?(e=(defaultVals.value||"").split(","),t=defaultVals.prop||"id"):e=defaultVals.split(","),Validator.setCheckboxValue(t,e.join(","))}}var e=new Page({pageShowNum:0});window.pageLoad=function(){$.extend(data||{},{companyId:$("#companyId").val(),loginNameParam:$("#loginName").val(),deptId:$("#officeId").val(),nameParam:$("#name").val(),treeId:$("#treeId").val()}),e.init(Const.admin+"/api/sys/SysUser/page",data,!0,function(e,t){a(e)})},$("#reset-btn").click(function(){Mom.clearForm(".toolbar-form"),e.reset(["nameParam","deptId","loginNameParam","companyId"])}),pageLoad()}),$("#companyName").on("dblclick",e),$("#companyButton").on("click",e),$("#officeName").on("dblclick",t),$("#officeButton").on("click",t),window.getCheckValues=function(){var a=[],e=[],t=[],n=!0;return $("#datainner tr td .i-checks").each(function(n,o){if($(o).is(":checked")){a.push($(o).val()),e.push($(o).attr("data-name"));var l=$(this).attr("data-row"),i=$.parseJSON(l);t.push(i)}}),0==a.length&&(n=!1,Mom.layMsg("请选择数据")),{success:n,id:a.join(",").replace(/u_/gi,""),name:e.join(","),selRows:t}}});