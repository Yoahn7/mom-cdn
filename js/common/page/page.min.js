var Page=function(o){var a=this,n={url:"",paramData:null,contentType:"Json",checkUser:!0,renderTableFn:null,pageSizeArr:[5,10,20,25,30,40,50],pageSizeAll:!0,defaultPageSizeIndex:2,rowCount:0,pageShowNum:10,pageContainDom:$(".pagination-box"),scrollTop:!0,loading:!0};this.option=$.extend(!0,{},n,o||{}),this.init=function(o,n,e,t){if(a.option.url=o,a.option.paramData=n,t){var p=parseInt(a.option.pageContainDom.find($("#pag-sel option:selected")).val()),i=isNaN(p)||p<0?a.option.pageSizeArr[a.option.defaultPageSizeIndex]:p,r=1;"Json"==a.option.contentType?a.option.paramData.page=$.extend(!0,{},{pageSize:i,pageNo:r},a.option.paramData.page):(a.option.paramData["page.pageSize"]=i,a.option.paramData["page.pageNo"]=r),a.option.renderTableFn=t}a.pageCom(n,e)},this.reload=function(){a.option.paramData&&a.pageCom(a.option.paramData,!1)},this.bindEvent=function(){this.option.pageContainDom.find(".pag-sel").unbind("change").change(function(){var o=parseInt($(this).val()),n=-1==o?a.option.rowCount:o;"Json"==a.option.contentType?a.option.paramData.page.pageSize=n:a.option.paramData["page.pageSize"]=n,a.pageCom(a.option.paramData,!0)})},this.reset=function(o){var n=o.length;if(n)for(var e=0;e<n;e++)if("object"==typeof a.option.paramData[o[e]]){var t=a.option.paramData[o[e]];for(var p in t){var i=[];i.push(o[e][p]),t[p]=""}}else a.option.paramData[o[e]]="";"Json"==a.option.contentType?a.option.paramData.page.pageSize=$(".pag-sel").val():a.option.paramData["page.pageSize"]=$(".pag-sel").val(),a.pageCom(a.option.paramData,!0)},this.pageCom=function(o,n){"Json"==a.option.contentType&&(o=JSON.stringify(o)),Api["ajax"+a.option.contentType](a.option.url,o,function(o){if(o.success){var e=o.page;a.option.rowCount=Number(e.count);var t="";if(0==a.option.pageShowNum){t+="   <span>每页</span><select class='pag-sel' class='form-control' style='height:22px;padding:0 4px;margin:0 3px;display:inline;font-size:12px;'>";var p=a.option.pageSizeArr,i=" selected";p.forEach(function(o,a){var n=o==Number(e.pageSize)?" selected":"";t+="<option value='"+o+"' "+n+">"+o+"</option>",""!=n&&(i="")}),1==a.option.pageSizeAll&&(t+="<option value='-1' "+i+">所有</option>"),t+="</select>条",t+="，共"+e.count+"条",a.option.pageShowNum=0}else{Number(e.count)>0&&(t+="显示第"+(Number(e.startRowNum)+1)+"~"+(Number(e.endRowNum)+1)+"条记录，"),t+="共 "+e.count+"条记录",t+="   <span>每页显示</span><select name='' class='pag-sel' class='form-control' style='height:26px;padding:0 4px;display:inline;font-size:12px;'>";p=a.option.pageSizeArr,i=" selected";p.forEach(function(o,a){var n=o==Number(e.pageSize)?" selected":"";t+="<option value='"+o+"' "+n+">"+o+"</option>",""!=n&&(i="")}),1==a.option.pageSizeAll&&(t+="<option value='-1' "+i+">所有</option>"),t+="</select>条记录"}if(0==$(a.option.pageContainDom).length)return void alert("未找到分页插件容器");$(a.option.pageContainDom).find(".page-info").empty().html(t),a.bindEvent(a.option.contentType),$(a.option.pageContainDom).find(".pagination-detail").show(),n&&a.callBackPagination(Number(e.pageSize),Number(e.pageCount),Number(e.count)),a.option.renderTableFn&&a.option.renderTableFn(e.rows,o),a.option.scrollTop&&$("html,body").animate({scrollTop:"0px"},300)}else Mom.layAlert(o.message)},null,a.option.checkUser,a.option.loading)},this.callBackPagination=function(o,n,e){this.option.pageContainDom.find(".pagination-roll").extendPagination({totalCount:e,showCount:n,showPage:a.option.pageShowNum,limit:o,callback:function(o,n,e){"Json"==a.option.contentType?a.option.paramData.page={pageSize:n,pageNo:o}:(a.option.paramData["page.pageSize"]=n,a.option.paramData["page.pageNo"]=o),a.init(a.option.url,a.option.paramData,!1)}})}};