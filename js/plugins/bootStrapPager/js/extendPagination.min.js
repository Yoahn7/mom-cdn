(function(a){a.fn.extendPagination=function(s){var f={totalCount:"",showPage:"10",limit:"5",callback:function(){return false}};a.extend(f,s||{});if(f.totalCount==""){a(this).empty();return false}else{if(Number(f.totalCount)<=0){a(this).empty();return false}}if(f.showPage===""){f.showPage="10"}else{if(Number(f.showPage)<0){f.showPage="10"}}if(f.limit==""){f.limit="5"}else{if(Number(f.limit)<=0){f.limit="5"}}var r=Number(f.totalCount),k=Number(f.showPage),g=Number(f.limit),m=Math.ceil(r/g);if(m>0){var n=[];n.push(' <ul class="pagination">');if(k>0){n.push(' <li class="previous"><a href="#">&laquo;</a></li>');n.push('<li class="disabled hidden"><a href="#">...</a></li>');if(m<=k){for(var l=1;l<=m;l++){if(l==1){n.push(' <li class="active"><a href="#">'+l+"</a></li>")}else{n.push(' <li><a href="#">'+l+"</a></li>")}}}else{for(var h=1;h<=k;h++){if(h==1){n.push(' <li class="active"><a href="#">'+h+"</a></li>")}else{n.push(' <li><a href="#">'+h+"</a></li>")}}}n.push('<li class="disabled hidden"><a href="#">...</a></li>');n.push('<li class="next"><a href="#">&raquo;</a></li></ul>');a(this).html(n.join(""));if(m>k){a(this).find("ul.pagination li.next").prev().removeClass("hidden")}var p=a(this).find("ul.pagination"),o=p.find("li.previous"),d=p.find("li").not(".previous,.disabled,.next"),e=p.find("li.next");function b(j,u){var t=o.next();for(var v=j;v<=u;v++){if(j==1&&(o.next().attr("class").indexOf("hidden"))<0){o.next().addClass("hidden")}else{if(j>1&&(o.next().attr("class").indexOf("hidden"))>0){o.next().removeClass("hidden")}}if(u==m&&(e.prev().attr("class").indexOf("hidden"))<0){e.prev().addClass("hidden")}else{if(u<m&&(e.prev().attr("class").indexOf("hidden"))>0){e.prev().removeClass("hidden")}}var w=t.next().find("a");if(!isNaN(w.html())){w.html(v)}t=t.next()}}function c(i){f.callback(i,f.limit,r)}d.click(function(v){v.preventDefault();var j=Number(a(this).find("a").html()),u=p.find('li[class="active"]'),w=Number(u.find("a").html());if(j==w){return false}if(m>k&&j>1){var t=j,i=1;if((a(this).prev().attr("class"))&&(a(this).prev().attr("class").indexOf("disabled"))>=0){i=j-1;t=i+k-1;b(i,t)}else{if((a(this).next().attr("class"))&&(a(this).next().attr("class").indexOf("disabled"))>=0){if(m-j>=1){t=j+1}else{t=m}if(t-k>0){i=(t-k)+1}b(i,t)}}}u.removeClass("active");a.each(d,function(x,y){if(a(y).find("a").html()==j){a(y).addClass("active");c(j)}})});o.click(function(u){u.preventDefault();var t=p.find('li[class="active"]'),v=Number(t.find("a").html());if(v<=1){return false}if(m>k){var j=v,i=1;if((t.prev().prev().attr("class"))&&(t.prev().prev().attr("class").indexOf("disabled"))>=0){i=v-1;if(i>1){i=i-1}j=i+k-1;b(i,j)}}a.each(d,function(w,x){if(a(x).find("a").html()==(v-1)){t.removeClass("active");a(x).addClass("active");c(v-1)}})});e.click(function(u){u.preventDefault();var t=p.find('li[class="active"]'),v=Number(t.find("a").html());if(v>=m){return false}if(m>k){var j=v,i=1;if((t.next().next().attr("class"))&&(t.next().next().attr("class").indexOf("disabled"))>=0){j=v+2;if(j>m){j=m}i=j-k+1;b(i,j)}}a.each(d,function(w,x){if(a(x).find("a").html()==(v+1)){t.removeClass("active");a(x).addClass("active");c(v+1)}})})}else{n.push(' <li class="first" title="首页"><a href="#" style="font-family:Webdings!important;"> 7 </a></li>');n.push(' <li class="previous" title="上一页"><a href="#" style="font-family:Webdings!important;"> 3 </a></li>');n.push(' <li><span style="padding:0"><input type="text" class="curPg" style="width:40px;height:32px;border:none;text-align:center;padding:0;" placeholder="页码" value="1"></span></li>');n.push(' <li class="next" title="下一页"><a href="#" style="font-family:Webdings!important;"> 4 </a></li>');n.push(' <li class="last" title="末页"><a href="#" style="font-family:Webdings!important;"> 8 </a></li>');a(this).html(n.join(""));var p=a(this).find("ul.pagination");q(1,false);p.find(".first").click(function(i){i.preventDefault();if(!a(this).hasClass("disabled")){q(1,true)}});p.find(".previous").click(function(i){i.preventDefault();if(!a(this).hasClass("disabled")){var j=Number(p.find(".curPg").val());q(j-1,true)}});p.find(".next").click(function(i){i.preventDefault();if(!a(this).hasClass("disabled")){var j=Number(p.find(".curPg").val());q(j+1,true)}});p.find(".last").click(function(i){i.preventDefault();if(!a(this).hasClass("disabled")){q(m,true)}});p.find(".curPg").keyup(function(i){var j=a(this).val();if(j!=""&&j!=" "){j=j.replace(/[^0-9]/g,"");if(i.keyCode=="13"){q(j,true)}}});function q(j,i){if(j<=0){j=1}if(j==1){a(p).find(".first").addClass("disabled");a(p).find(".previous").addClass("disabled")}else{a(p).find(".first").removeClass("disabled");a(p).find(".previous").removeClass("disabled")}if(j>m){j=m}if(j==m){a(p).find(".next").addClass("disabled");a(p).find(".last").addClass("disabled")}else{a(p).find(".next").removeClass("disabled");a(p).find(".last").removeClass("disabled")}a(p).find(".curPg").val(j);if(i){f.callback(j,f.limit,r)}}}}}})(jQuery);