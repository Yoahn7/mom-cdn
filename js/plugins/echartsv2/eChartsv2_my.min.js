define([cdnDomain+"/js/plugins/echartsv2/zrender.min.js","macarons"],function(c,b){var a={ecRender:{renderOne:function(d,g,h){a.containerId=d;var e=echarts.init(document.getElementById(d),b);var f=a.options(h,g);e.clear();e.setOption(f);window.addEventListener("resize",function(){e.resize()})}},options:function(g,d){var f,e=g.type;if(e=="pie"||e=="loopPie"||e=="radiusPie"||e=="pieAndLoop"||e=="loopCom"||e=="loopAndLoop"){f=a.optionTemplates.pie(d,g)}else{if(e=="line"||e=="heapLine"||e=="heapAreaLine"||e=="areaLine"||e=="maxMinLine"||e=="lineAndBar"||e=="bar"||e=="manySeriesBar"||e=="manyColorBar"||e=="seriesHeapBar"||e=="stackedBar"||e=="percentHeapBar"){f=a.optionTemplates.lineAndBar(d,g)}else{if(e=="timeLineBar"){f=a.optionTemplates.timeLineBar(d,g)}else{if(e=="radar"||e=="wormhole"){f=a.optionTemplates.radar(d,g)}else{if(e=="gauge"){f=a.optionTemplates.gauge(d,g)}else{if(e=="moreGauge"){f=a.optionTemplates.moreGauge(d,g)}else{if(e=="staggered"){f=a.optionTemplates.staggered(d,g)}else{if(e=="populationMap"){f=a.optionTemplates.populationMap(d,g)}else{if(e=="barqueue"){f=a.optionTemplates.barqueue(d,g)}}}}}}}}}return f},optionTemplates:{commonOption:{title:function(e){var d={text:typeof(e)=="string"?e:e[0]||" ",subtext:typeof(e)=="string"?" ":e[1],x:"center"};return{title:d}},toolbox:function(){return{toolbox:{show:false,feature:{mark:{show:true},dataView:{show:true,readOnly:false},restore:{show:true},saveAsImage:{show:true}}}}},},commonLineOption:{},pie:function(f,g){var e=a.optionTemplates.FormatData(f,g);var d={legend:{orient:"vertical",x:"left",data:e.category},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},title:{text:typeof(g.title)=="string"?g.title:g.title[0]||" ",subtext:typeof(g.title)=="string"?" ":g.title[1],x:"center"},toolbox:{show:false,feature:{mark:{show:true},dataView:{show:true,readOnly:false},restore:{show:true},saveAsImage:{show:true}}},series:e.series};if(g.specialAttr){d=$.extend(true,{},d,g.specialAttr)}return d},lineAndBar:function(g,h){var f=a.optionTemplates.FormatData(g,h);var e={title:{text:typeof(h.title)=="string"?h.title:h.title[0]||" ",subtext:typeof(h.title)=="string"?" ":h.title[1],x:"center"},toolbox:{show:false,feature:{mark:{show:true},dataView:{show:true,readOnly:false},restore:{show:true},saveAsImage:{show:true}}},legend:{data:f.category,orient:"vertical",x:"86%",y:"center"},grid:{x:"10%",x2:"20%"},xAxis:[{type:"category",data:f.xAxis,boundaryGap:f.boundaryGap}],yAxis:[{name:"",type:"value"}],tooltip:{trigger:"axis",axisPointer:{type:"line"}},series:f.series};if(h.type=="bar"||h.type=="manySeriesBar"||h.type=="manyColorBar"||h.type=="seriesHeapBar"||h.type=="percentHeapBar"||h.type=="stackedBar"){e.tooltip.axisPointer.type="shadow";if(h.type=="manyColorBar"){var d=["#ff7f50","#87cefa","#da70d6","#32cd32","#6495ed","#ff69b4","#ba55d3","#cd5c5c","#ffa500","#40e0d0"];e.tooltip={trigger:"axis",backgroundColor:"rgba(255,255,255,0.7)",axisPointer:{type:"shadow"},formatter:function(o){var k=d[o[0].dataIndex];var n='<div style="color:'+k+'">';n+="<strong>"+o[0].name+"</strong>";for(var m=0,j=o.length;m<j;m++){n+="<br/>"+o[m].seriesName+" : "+o[m].value}n+="</div>";return n}}}if(h.type=="stackedBar"){e.xAxis=[{type:"value"}];e.yAxis=[{type:"category",data:f.xAxis}]}if(h.type=="percentHeapBar"){e.yAxis[0].axisLabel={show:true,formatter:"{value}%"}}}if(h.specialAttr){e=$.extend(true,{},e,h.specialAttr)}return e},timeLineBar:function(e,f){var d=a.optionTemplates.FormatData(e,f);var k={timeline:{data:d.timeLine,autoPlay:true,playInterval:d.playInterval,x:"1%"},options:[{toolbox:a.optionTemplates.commonOption.toolbox(),legend:{data:d.category,orient:"vertical",x:"86%",y:"center"},grid:{x:"8%",y:"10%",y2:"25%",x2:"22%"},xAxis:[{type:"category",data:d.xAxis,boundaryGap:d.boundaryGap}],yAxis:[{type:"value",name:""},{type:"value",name:""}],calculable:true,tooltip:{trigger:"axis"},series:d.series}]};var l=e.rows;for(var n=1;n<l[0].data.length;n++){var h={};var j=[];for(var g=0;g<l.length;g++){var m={data:l[g].data[n].value};j.push(m)}h.series=j;k.options.push(h)}if(f.specialAttr){k=$.extend(true,{},k,f.specialAttr)}return k},radar:function(f,g){var d=a.optionTemplates.FormatData(f,g);var e={title:{text:typeof(g.title)=="string"?g.title:g.title[0]||" ",subtext:typeof(g.title)=="string"?" ":g.title[1],x:"center"},toolbox:{show:false,feature:{mark:{show:true},dataView:{show:true,readOnly:false},restore:{show:true},saveAsImage:{show:true}}},tooltip:{trigger:"axis"},legend:{orient:"vertical",x:"left",y:"center",data:d.category},calculable:true,polar:[{indicator:d.indicator,radius:"60%"}],series:d.series};if(g.type=="wormhole"){e.tooltip.trigger="item";e.tooltip.backgroundColor="rgba(0,0,250,0.2)"}return e},gauge:function(e,f){var d={title:{text:typeof(f.title)=="string"?f.title:f.title[0]||" ",subtext:typeof(f.title)=="string"?" ":f.title[1],x:"center"},toolbox:{show:false,feature:{mark:{show:true},dataView:{show:true,readOnly:false},restore:{show:true},saveAsImage:{show:true}}},series:[{name:"仪表盘",type:"gauge",detail:{formatter:"{value}℃"},data:e}]};if(f.specialAttr){d=$.extend(true,{},d,f.specialAttr)}return d},moreGauge:function(f,g){var e=a.optionTemplates.FormatData(f,g);var d={title:{text:typeof(g.title)=="string"?g.title:g.title[0]||" ",subtext:typeof(g.title)=="string"?" ":g.title[1],x:"center"},toolbox:{show:false,feature:{mark:{show:true},dataView:{show:true,readOnly:false},restore:{show:true},saveAsImage:{show:true}}},series:e};if(g.specialAttr){d=$.extend(true,{},d,g.specialAttr)}return d},staggered:function(f,g){var d=a.optionTemplates.FormatData(f,g);var e={title:{text:typeof(g.title)=="string"?g.title:g.title[0]||" ",subtext:typeof(g.title)=="string"?" ":g.title[1],x:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{show:false,feature:{mark:{show:true},dataView:{show:true,readOnly:false},magicType:{show:true,type:["line","bar"]},restore:{show:true},saveAsImage:{show:true}}},grid:{y:80,y2:30},xAxis:[{type:"value",position:"top",splitLine:{lineStyle:{type:"dashed"}},}],yAxis:[{type:"category",axisLine:{show:false},axisLabel:{show:false},axisTick:{show:false},splitLine:{show:false},data:d.yAxis}],series:[{name:g.name||g.title||"",type:"bar",stack:"总量",itemStyle:{normal:{color:"orange",borderRadius:5,label:{show:true,position:"left",formatter:"{b}"}}},data:d.data}]};if(g.specialAttr){e=$.extend(true,{},e,g.specialAttr)}return e},populationMap:function(f,g){var d=a.optionTemplates.FormatData(f,g);var e={title:{text:typeof(g.title)=="string"?g.title:g.title[0]||" ",subtext:typeof(g.title)=="string"?" ":g.title[1],x:"center"},toolbox:{show:false,feature:{mark:{show:true},dataView:{show:true,readOnly:false},restore:{show:true},saveAsImage:{show:true}}},legend:{orient:"vertical",x:"left",data:d.legendData},calculable:true,xAxis:[{type:"value",show:true,axisLabel:{formatter:function(h){return Math.abs(h)}}}],yAxis:[{type:"category",show:false,axisTick:{show:false},data:d.yAxisData}],series:[{name:d.popMap.name,type:"bar",stack:"总量",barWidth:28,itemStyle:{normal:{label:{show:true}}},data:d.popMap.data},{name:d.popMaps.name,type:"bar",stack:"总量",barWidth:28,itemStyle:{normal:{label:{show:true,position:"left",formatter:function(h){return -h.data}}}},data:d.popMaps.data}]};if(g.specialAttr){e=$.extend(true,{},e,g.specialAttr)}return $.extend({},e)},barqueue:function(f,g){var e=a.optionTemplates.FormatData(f,g);var d={tooltip:{trigger:"axis",},legend:{data:e.legendData},title:{text:typeof(g.title)=="string"?g.title:g.title[0]||" ",subtext:typeof(g.title)=="string"?" ":g.title[1],x:"center"},toolbox:{show:false,feature:{mark:{show:true},dataView:{show:true,readOnly:false},restore:{show:true},saveAsImage:{show:true}}},calculable:true,xAxis:[{type:"value",boundaryGap:[0,0.01]}],yAxis:[{type:"category",data:e.yAxisData}],series:e.seriesData};if(g.specialAttr){d=$.extend(true,{},d,g.specialAttr)}return $.extend({},d)},FormatData:function(N,e){var l=e.type;var z={normal:{label:{position:"inner",formatter:function(i){return(i.percent-0).toFixed(0)+"%"}},labelLine:{show:false}},emphasis:{label:{show:true,formatter:"{b}"}}};var O={normal:{label:{show:false},labelLine:{show:false}},emphasis:{label:{show:true,position:"center",textStyle:{fontSize:"15",fontWeight:"bold"}}}};if(l=="pie"||l=="loopPie"||l=="radiusPie"||l=="pieAndLoop"||l=="loopAndLoop"){var K=N;var P=[];var q=[];var m=[];for(var G=0;K&&G<K.length;G++){for(var E=0;E<P.length&&P[E]!=K[G].name;E++){}if(E==P.length){P.push(K[G].name)}for(var E=0;E<q.length&&q[E]!=K[G].group;E++){}if(E==q.length){q.push(K[G].group)}}for(var G=0;G<q.length;G++){var J=[];for(var F=0;F<K.length;F++){if(q[G]==K[F].group){J.push({name:K[F].name,value:parseInt(K[F].value)})}}m.push(J)}var u=[];for(var G=0;G<m.length;G++){var w={type:"pie",name:q[G],data:m[G]};if(l=="pieAndLoop"||l=="loopAndLoop"){w.center=["50%","50%"];if((G+1)%2==0){w.radius=["45%","55%"]}else{if(l=="loopAndLoop"){w.radius=["25%","35%"];w.itemStyle=O}else{w.radius="35%";w.itemStyle=z}}}else{if(m.length>1){w.center=[(G+1)*(36-(m.length-2)*7)+"%","50%"];if(l=="pie"){w.radius="33%"}else{if(l=="loopPie"){w.radius=["25%","35%"]}else{if(l=="radiusPie"){w.radius=["5%","25%"];w.roseType="area"}}}}else{w.center=["50%","50%"];if(l=="pie"){w.radius="55%"}else{if(l=="loopPie"){w.radius=["55%","65%"]}else{if(l=="radiusPie"){w.radius=["35%","65%"];w.roseType="area"}}}}}u.push(w)}return{category:P,series:u}}else{if(l=="loopCom"){var K=N;var P=[];var m=[];for(var G=0;K&&G<K.length;G++){for(var E=0;E<P.length&&P[E]!=K[G].name;E++){}if(E==P.length){P.push(K[G].name)}}for(var G=0;G<P.length;G++){var J=[];for(var F=0;F<K.length;F++){if(P[G]==K[F].name){J.push({name:K[F].name,value:K[F].value},{name:"hidden",value:100-K[F].value,itemStyle:{normal:{color:"rgba(0,0,0,0)",label:{show:false},labelLine:{show:false}},emphasis:{color:"rgba(0,0,0,0)"}}})}}m.push(J)}var u=[];var I=[25,32];for(var G=0;G<m.length;G++){var w={type:"pie",name:P[G],data:m[G],itemStyle:{normal:{label:{show:false},labelLine:{show:false}}}};w.center=["50%","50%"];w.clockWise=true;if(G==0){w.radius=["25%","32%"]}else{w.radius=[I[0]+G*(I[1]-I[0])+"%",I[1]+G*(I[1]-I[0])+"%"]}u.push(w)}return{category:P,series:u}}else{if(l=="line"||l=="heapLine"||l=="heapAreaLine"||l=="areaLine"||l=="maxMinLine"||l=="bar"||l=="manySeriesBar"||l=="manyColorBar"||l=="seriesHeapBar"||l=="stackedBar"||l=="percentHeapBar"||l=="lineAndBar"){var q=[];var u=[];var K=N;var C=true;for(var G=0;K&&G<K.length;G++){for(var E=0;E<q.length&&q[E]!=K[G].group;E++){}if(E==q.length){q.push(K[G].group)}var B={name:K[G].group,data:K[G].value,type:l};if(l=="heapLine"){B.stack="allValue";B.type="line";C=false}else{if(l=="heapAreaLine"){B.stack="allValue";B.type="line";B.itemStyle={normal:{areaStyle:{type:"default"}}};C=false}else{if(l=="areaLine"){B.type="line";B.itemStyle={normal:{areaStyle:{type:"default"}}};C=false}else{if(l=="maxMinLine"){B.type="line";B.markPoint={data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]};B.markLine={data:[{type:"average",name:"平均值"}]};C=false}else{if(l=="manySeriesBar"){B.type="bar";B.markPoint={data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]};B.markLine={data:[{type:"average",name:"平均值"}]}}else{if(l=="manyColorBar"){B.type="bar";var A=["#ff7f50","#87cefa","#da70d6","#32cd32","#6495ed","#ff69b4","#ba55d3","#cd5c5c","#ffa500","#40e0d0"];var p={normal:{color:function(i){if(i.dataIndex<0){return c.color.lift(A[A.length-1],i.seriesIndex*0.2)}else{return c.color.lift(A[i.dataIndex],i.seriesIndex*0.2)}}}};B.itemStyle=p}else{if(l=="seriesHeapBar"||l=="stackedBar"||l=="percentHeapBar"){B.type="bar";B.stack="总量";B.itemStyle={normal:{label:{show:true,position:"insideRight"}}};if(l=="percentHeapBar"){B.itemStyle={normal:{label:{show:true,position:"insideRight",formatter:"{c}%"},labelLine:{show:false}}}}if(l=="seriesHeapBar"){B.barWidth=30}}else{if(l=="lineAndBar"){B.type=K[G].tableType}}}}}}}}u.push(B)}var o={category:q,xAxis:K[0].name,series:u,boundaryGap:C};return o}else{if(l=="timeLineBar"){var q=[];var u=[];var K=N.rows;var C=true;for(var G=0;G<K.length;G++){q.push(K[G].group);for(var t=0;t<K[G].data.length;t++){if(t==0){var w={name:K[G].group,type:"bar",data:K[G].data[t].value};if(G==1){w.yAxisIndex=1}u.push(w)}}}var o={category:q,xAxis:K[0].name,series:u,boundaryGap:C,timeLine:N.timeLine,playInterval:N.playInterval*1000};return o}else{if(l=="radar"||l=="wormhole"){var q=[],r=[],H=[];var K=N;for(var G=0;G<K.length;G++){q.push(K[G].group);var w={name:K[G].group,value:K[G].value};H.push(w)}if(l=="wormhole"){for(var t=0;t<K[0].name.length;t++){var M={text:K[0].name[t],max:K[0].max};r.push(M)}var u=[{type:"radar",symbol:"none",itemStyle:{normal:{lineStyle:{width:1}},emphasis:{areaStyle:{color:"rgba(0,250,0,0.3)"}}},data:H}]}else{for(var t=0;t<K[0].name.length;t++){var M={text:K[0].name[t]};r.push(M)}var u=[{type:l,itemStyle:{normal:{areaStyle:{type:"default"}}},data:H}]}var o={category:q,series:u,indicator:r};return o}else{if(l=="moreGauge"){var K=N;var H=[];var y={};for(var G=0;G<K.length;G++){if(K[G].data1){y={name:K[G].data1.name,type:"gauge",z:3,min:0,max:220,splitNumber:11,axisLine:{lineStyle:{width:10}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},title:{textStyle:{fontWeight:"bolder",fontSize:20,fontStyle:"italic"}},data:[]};y.data.push(K[G].data1);H.push(y)}else{if(K[G].data2){y={name:K[G].data2.name,type:"gauge",center:["20%","55%"],radius:"50%",min:0,max:7,endAngle:45,splitNumber:7,axisLine:{lineStyle:{width:8}},axisTick:{length:12,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},pointer:{width:5},title:{offsetCenter:[0,"-30%"],},detail:{textStyle:{fontWeight:"bolder"}},data:[]};y.data.push(K[G].data2);H.push(y)}else{if(K[G].data3&&K[G].data3.length>0){for(var F=0;F<K[G].data3.length;F++){if(K[G].data3[F].data1){y={name:K[G].data3[F].data1.name,type:"gauge",center:["75%","50%"],radius:"50%",min:0,max:2,startAngle:135,endAngle:45,splitNumber:2,axisLine:{lineStyle:{color:[[0.2,"#ff4500"],[0.8,"#48b"],[1,"#228b22"]],width:8}},axisTick:{splitNumber:5,length:10,lineStyle:{color:"auto"}},axisLabel:{formatter:function(i){switch(i+""){case"0":return"E";case"1":return"Gas";case"2":return"F"}}},splitLine:{length:15,lineStyle:{color:"auto"}},title:{show:false},pointer:{width:2},detail:{show:false},data:[]};y.data.push(K[G].data3[F].data1);H.push(y)}else{if(K[G].data3[F].data2){y={name:K[G].data3[F].data2.name,type:"gauge",center:["75%","55%"],radius:"50%",min:0,max:2,startAngle:315,endAngle:225,splitNumber:2,axisLine:{lineStyle:{color:[[0.2,"#ff4500"],[0.8,"#48b"],[1,"#228b22"]],width:8}},axisTick:{show:false},splitLine:{length:15,lineStyle:{color:"auto"}},pointer:{width:2},detail:{show:false},title:{show:false},data:[]};y.data.push(K[G].data3[F].data2);H.push(y)}}}}}}}return H}else{if(l=="staggered"){var K=N;var v={};var s=[];var f={normal:{label:{position:"right"}}};for(var G=0;G<K.length;G++){s.unshift(K[G].name);if(K[G].value>0){K[G].itemStyle=f}}v.yAxis=s;v.data=K;return v}else{if(l=="barqueue"){var K=N;var h={};var d=[],H=[],L=[];for(var G=0;G<K.length;G++){d.push(K[G].group);H.push({name:K[G].group,type:"bar",data:K[G].value})}h.legendData=d;h.seriesData=H;h.yAxisData=K[0].name;return h}else{if(l=="populationMap"){var K=N;var D={};var d=[];var L=[];var n={};var g={};for(var G=0;G<K.length;G++){d.push(K[G].groupe);if(K[G].type=="0"){g.data=K[G].value;g.name=K[G].groupe}else{n.data=K[G].value;n.name=K[G].groupe}}for(var F=0;F<n.data.length;F++){if(n.data[F]>0){n.data[F]=-n.data[F]}}D.legendData=d;D.popMap=g;D.popMaps=n;D.yAxisData=K[0].name;return D}}}}}}}}}},tileInterValArr:[],startTileInterval:function(g,f,e){if(f&&f>0){var d=setInterval(function(){if(e&&document.getElementById(g).clientWidth){e()}},f*1000);a.optionTemplates.tileInterValArr.push({id:g,tileInterv:d})}},clearTileInterval:function(d){$(a.tileInterValArr).each(function(e,f){if(f.id==d){clearInterval(f.tileInterv);a.tileInterValArr.splice(e,1)}})}}};return{ec_ecsRender:a.ecRender.renderOne,ec_init:a.init,}});