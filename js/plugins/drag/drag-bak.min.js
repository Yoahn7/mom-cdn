var Drag=function(f,b){var c=this;var e={move:"both",randomPosition:true,hander:1};this.opt=$.extend({},e,c.opt||{});this.$dom=$(f);this.father=$(f).parent();this.faWidth=this.father.width();this.faHeight=this.father.height();var a=this.opt.hander;if(a==1){a=this.$dom}else{a=this.$dom.find(this.opt.hander)}this.father.css({position:"relative",overflow:"hidden"});this.$dom.css({position:"absolute"});a.css({cursor:"move"});this.dragging=function(){var q=c.$dom;var o=false;var n;var l;var k;var j;var m=q.width()+parseInt(q.css("padding-left"))+parseInt(q.css("padding-right"));var i=q.height()+parseInt(q.css("padding-top"))+parseInt(q.css("padding-bottom"));var p=c.opt.move;var h=c.opt.randomPosition;if(h){g()}function g(){q.each(function(r){var s=parseInt(Math.random()*(c.faHeight-i));var t=parseInt(Math.random()*(c.faWidth-m));if(p.toLowerCase()=="x"){$(this).css({left:t})}else{if(p.toLowerCase()=="y"){$(this).css({top:s})}else{if(p.toLowerCase()=="both"){$(this).css({top:s,left:t})}}}})}a.mousedown(function(r){c.father.children().css({zIndex:"0"});this.css({zIndex:"1"});o=true;X=r.pageX;Y=r.pageY;n=this.position().left;l=this.position().top;return false});$(document).mouseup(function(r){o=false});$(document).mousemove(function(u){xPage=u.pageX;k=n+xPage-X;console.log(k);yPage=u.pageY;j=l+yPage-Y;function t(){if(o==true){q.css({left:k})}else{return}if(k<0){q.css({left:"0"})}if(k>(c.faWidth-m)){q.css({left:c.faWidth-m})}return k}function s(){if(o==true){q.css({top:j})}else{return}if(j<0){q.css({top:"0"})}if(j>(c.faHeight-i)){q.css({top:c.faHeight-i})}return j}function r(){if(o==true){q.css({left:k,top:j})}else{return}if(k<0){q.css({left:"0"})}if(k>(c.faWidth-m)){q.css({left:c.faWidth-m})}if(j<0){q.css({top:"0"})}if(j>(c.faHeight-i)){q.css({top:c.faHeight-i})}}if(b.onDrag){b.onDrag(q)}if(p.toLowerCase()=="x"){t()}else{if(p.toLowerCase()=="y"){s()}else{if(p.toLowerCase()=="both"){r()}}}})};this.resizeFa=function(){c.faWidth=c.father.width();c.faHeight=c.father.height()};this.dragging()};var d=new Dragging($("div"));d.resizeFa();$.fn.extend({dragging:function(x){var l=$(this);var q;var g;var f;var e;var i=0;var t=0;var c=l.parent();var n={move:"both",randomPosition:true,hander:1};var b=$.extend({},n,x);var m=b.move;var a=b.randomPosition;var j=b.hander;if(j==1){j=l}else{j=l.find(b.hander)}c.css({position:"relative",overflow:"hidden"});l.css({position:"absolute"});j.css({cursor:"move"});var h=c.width();var k=c.height();var y=l.width()+parseInt(l.css("padding-left"))+parseInt(l.css("padding-right"));var p=l.height()+parseInt(l.css("padding-top"))+parseInt(l.css("padding-bottom"));var w=false;var v;var u;var s;var r;if(a){o()}function o(){l.each(function(z){var A=parseInt(Math.random()*(k-p));var B=parseInt(Math.random()*(h-y));if(m.toLowerCase()=="x"){$(this).css({left:B})}else{if(m.toLowerCase()=="y"){$(this).css({top:A})}else{if(m.toLowerCase()=="both"){$(this).css({top:A,left:B})}}}})}j.mousedown(function(z){c.children().css({zIndex:"0"});l.css({zIndex:"1"});w=true;f=z.pageX;e=z.pageY;v=l.position().left;u=l.position().top;return false});$(document).mouseup(function(z){w=false});$(document).mousemove(function(C){q=C.pageX;s=v+q-f;g=C.pageY;r=u+g-e;function B(){if(w==true){l.css({left:s})}else{return}if(s<0){l.css({left:"0"})}if(s>(h-y)){l.css({left:h-y})}return s}function A(){if(w==true){l.css({top:r})}else{return}if(r<0){l.css({top:"0"})}if(r>(k-p)){l.css({top:k-p})}return r}function z(){if(w==true){l.css({left:s,top:r})}else{return}if(s<0){l.css({left:"0"})}if(s>(h-y)){l.css({left:h-y})}if(r<0){l.css({top:"0"})}if(r>(k-p)){l.css({top:k-p})}}if(b.onDrag){b.onDrag(l)}if(m.toLowerCase()=="x"){B()}else{if(m.toLowerCase()=="y"){A()}else{if(m.toLowerCase()=="both"){z()}}}})}});