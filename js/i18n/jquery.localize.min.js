(function(b){var a;a=function(c){c=c.replace(/_/,"-").toLowerCase();if(c.length>3){c=c.substring(0,3)+c.substring(3).toUpperCase()}return c};b.defaultLanguage=a(navigator.languages&&navigator.languages.length>0?navigator.languages[0]:navigator.language||navigator.userLanguage);b.localize=function(g,f){var n,u,q,e,d,v,k,h,s,t,o,j,p,m,i,l,r,c;if(f==null){f={}}c=this;e={};q=f.fileExtension||"json";u=b.Deferred();k=function(w,y,z){var x;if(z==null){z=1}switch(z){case 1:e={};if(f.loadBase){x=w+("."+q);return d(x,w,y,z)}else{return k(w,y,2)}break;case 2:x=""+w+"-"+(y.split("-")[0])+"."+q;return d(x,w,y,z);case 3:x=""+w+"-"+(y.split("-").slice(0,2).join("-"))+"."+q;return d(x,w,y,z);default:return u.resolve()}};d=function(y,x,B,C){var w,A,z;if(f.pathPrefix!=null){y=""+f.pathPrefix+"/"+y}z=function(D){b.extend(e,D);p(e);return k(x,B,C+1)};A=function(){if(C===2&&B.indexOf("-")>-1){return k(x,B,C+1)}else{if(f.fallback&&f.fallback!==B){return k(x,f.fallback)}}};w={url:y,dataType:"json",async:true,timeout:f.timeout!=null?f.timeout:500,success:z,error:A};if(window.location.protocol==="file:"){w.error=function(D){return z(b.parseJSON(D.responseText))}}return b.ajax(w)};p=function(w){if(f.callback!=null){return f.callback(w,n)}else{return n(w)}};n=function(w){b.localize.data[g]=w;return c.each(function(){var y,x,z;y=b(this);x=y.data("localize");x||(x=y.attr("rel").match(/localize\[(.*?)\]/)[1]);z=r(x,w);if(z!=null){return h(y,x,z)}})};h=function(x,w,y){if(x.is("input")){o(x,w,y)}else{if(x.is("textarea")){o(x,w,y)}else{if(x.is("img")){t(x,w,y)}else{if(x.is("optgroup")){j(x,w,y)}else{if(!b.isPlainObject(y)){x.html(y)}}}}}if(b.isPlainObject(y)){return s(x,y)}};o=function(x,w,y){var z;z=b.isPlainObject(y)?y.value:y;if(x.is("[placeholder]")){return x.attr("placeholder",z)}else{return x.val(z)}};s=function(w,x){i(w,"title",x);i(w,"href",x);return l(w,"text",x)};j=function(x,w,y){return x.attr("label",y)};t=function(x,w,y){i(x,"alt",y);return i(x,"src",y)};r=function(x,B){var y,A,z,w;y=x.split(/\./);A=B;for(z=0,w=y.length;z<w;z++){x=y[z];A=A!=null?A[x]:null}return A};i=function(x,w,y){y=r(w,y);if(y!=null){return x.attr(w,y)}};l=function(x,w,y){y=r(w,y);if(y!=null){return x.text(y)}};m=function(x){var w;if(typeof x==="string"){return"^"+x+"$"}else{if(x.length!=null){return((function(){var A,z,y;y=[];for(A=0,z=x.length;A<z;A++){w=x[A];y.push(m(w))}return y})()).join("|")}else{return x}}};v=a(f.language?f.language:b.defaultLanguage);if(f.skipLanguage&&v.match(m(f.skipLanguage))){u.resolve()}else{k(g,v,1)}c.localizePromise=u;return c};b.fn.localize=b.localize;return b.localize.data={}})(jQuery);